# 简易电子琴 - 上位机
>  2025 寒假 山东大学电子设计 STM32校园比赛作品 - 上位机
>
> #### 本程序的主要目标是实现和单片机之间基于串口通信的数字孪生
>
> #### 本文忽略图形化界面的细节，主要关注串口通信内容



## 串口通信数据包格式规定

#### 基本格式：包头 数据长度 指令类型 数据 包尾

#### 包头：0xFF 0xAA

#### 包尾：0x55 0x00

#### 数据长度：包含 指令类型 (1 字节) 和 数据 的字节数，最大长度不得超过 255

#### 指令类型：有两种类型的指令，读指令(有返回数据包) 0x02 和 写指令(无返回数据包) 0x12

#### 数据： (范围内) 任意长度和值，解释取决于程序

#### *返回数据包的格式基本相同，但是没有 指令类型 这一项*



## 指令表

### 读指令（0x02），有返回数据

> ##### 读指令返回的数据是以字节为单位拆分的数字组成的列表：[0x12, 0x23, ...]，每一条数据是与发送的读指令对应的，发送读指令时，需要给出一个函数用来接收返回的数据并处理

- #### 0x00，

  


### 写指令（0x12），无返回数据

> ##### 写指令实际上会返回单个数值 0x88，表示下位机处理完了当前指令，可以发送新的指令（在读指令中，这个值的功能被返回数据替代了），但是这一过程被我用底层封装的函数处理了，发送指令直接调用顶层接口就行，无需考虑这一过程，也不用等待返回值，会自动完成这件事

- #### 0x00 [0x]，


